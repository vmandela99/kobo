name: kobo

on:
  push:
    branches:
      - main  # or your deployment branch

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      KOBOTOOLBOX_USERNAME: ${{ secrets.KOBOTOOLBOX_USERNAME }}
      KOBOTOOLBOX_PASSWORD: ${{ secrets.KOBOTOOLBOX_PASSWORD }}

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Set up R
      uses: r-lib/actions/setup-r@v2

    - name: Install packages
      run: install.packages(c("shiny", "tidyverse", "KoboconnectR", "httr2"))

    - name: Run Shiny App (or Deploy to your Server)
      run: Rscript app.R